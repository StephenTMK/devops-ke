---
apiVersion: pkg.crossplane.io/v1alpha1
kind: ControllerConfig
metadata:
  name: aws-localstack-cc
  namespace: crossplane-system
spec:
  env:
    - name: AWS_ENDPOINT_URL
      value: http://localstack.localstack.svc.cluster.local:4566
    - name: AWS_S3_USE_PATH_STYLE
      value: "true"
    - name: AWS_REGION
      value: us-east-1
---
# Family provider – shared types/infra
apiVersion: pkg.crossplane.io/v1
kind: Provider
metadata:
  name: provider-family-aws
spec:
  package: xpkg.upbound.io/upbound/provider-family-aws:v1.2.0
  controllerConfigRef:
    name: aws-localstack-cc
---
# S3 sub-provider – s3.aws.upbound.io CRDs
apiVersion: pkg.crossplane.io/v1
kind: Provider
metadata:
  name: provider-aws-s3
spec:
  package: xpkg.upbound.io/upbound/provider-aws-s3:v1.2.0
  controllerConfigRef:
    name: aws-localstack-cc
